---
import Link from "@elements/Link.astro";
import {
	Astronav,
	MenuItems,
	MenuIcon,
	OpenIcon,
	CloseIcon,
	Dropdown,
	DropdownItems,
} from "astro-navbar";

import classy from "@utils/classy.js";

const textDirectoryClasses = classy([
	"typo-header-xxs",
	"text-neutral-500",
	"antialiased",
	(Astro.url.pathname === "/medicos" || Astro.url.pathname === "/centros-de-especialidad" || Astro.url.pathname === "/servicios") && "font-bold",
])

const textOrientationClasses = classy([
	"typo-header-xxs",
	"text-neutral-500",
	"antialiased",
	(Astro.url.pathname === "/pacientes" || Astro.url.pathname === "/visitantes") && "font-bold",
])

const linkClasses = classy([
	"lg:content-center",
	"pt-8 lg:p-0",
])

const dropdownClasses = classy([
	"group",
	"pt-8 lg:pt-0",
	"lg:self-center",
	"hidden lg:block"
])

const dropdownChildClasses = classy([
	"lg:absolute",
	"top-2 lg:bg-cyan lg:shadow flex",
	"flex-col",
])

const dropdownLinkClasses = classy([
	"text-nowrap",
	"hover:bg-blue",
	"py-2 px-3",
	"min-w-40"
])

const nonDropdownClasses = classy([
	"lg:hidden",
	"flex",
	"lg:content-center",
	"font-semibold lg:font-normal",
	"pt-8 lg:pt-0",
])

const nonDropdownLinkClasses = classy([
	"text-nowrap",
	"pt-5 pl-6",
	"min-w-40",
	"lg:hidden",
	"font-medium"
])
---
<Astronav closeOnClick>
	<div class="lg:hidden flex items-center justify-end col-start-3 col-end-4">
		<MenuIcon class="w-4 h-4 text-gray-800" >
			<OpenIcon>
				<svg width="40" height="40" viewBox="0 0 40 40" fill="none" xmlns="http://www.w3.org/2000/svg">
					<path d="M3.33325 9.99992C3.33325 9.07944 4.07944 8.33325 4.99992 8.33325H34.9999C35.9204 8.33325 36.6666 9.07944 36.6666 9.99992C36.6666 10.9204 35.9204 11.6666 34.9999 11.6666H4.99992C4.07944 11.6666 3.33325 10.9204 3.33325 9.99992Z" fill="#6A8FA6"/>
					<path d="M3.33325 19.9999C3.33325 19.0794 4.07944 18.3333 4.99992 18.3333H34.9999C35.9204 18.3333 36.6666 19.0794 36.6666 19.9999C36.6666 20.9204 35.9204 21.6666 34.9999 21.6666H4.99992C4.07944 21.6666 3.33325 20.9204 3.33325 19.9999Z" fill="#6A8FA6"/>
					<path d="M4.99992 28.3333C4.07944 28.3333 3.33325 29.0794 3.33325 29.9999C3.33325 30.9204 4.07944 31.6666 4.99992 31.6666H34.9999C35.9204 31.6666 36.6666 30.9204 36.6666 29.9999C36.6666 29.0794 35.9204 28.3333 34.9999 28.3333H4.99992Z" fill="#6A8FA6"/>
					</svg>
			</OpenIcon>
			<CloseIcon>
				<svg width="28" height="28" viewBox="0 0 28 28" fill="none" xmlns="http://www.w3.org/2000/svg">
					<path d="M2 25.7056L25.7051 2.0005" stroke="#D97364" stroke-width="3" stroke-linecap="round"/>
					<path d="M2 2L25.7051 25.7051" stroke="#D97364" stroke-width="3" stroke-linecap="round"/>
					</svg>
			</CloseIcon>
		</MenuIcon>
	</div>
	<MenuItems class="hidden lg:flex h-screen lg:h-auto col-span-3 lg:col-span-2 justify-end">
		<div class="flex flex-col lg:flex-row lg:gap-5">
			<div class="lg:content-center pt-8 lg:p-0 flex justify-between">
				<Link header url = "/" class="content-center" alt="Página de Inicio">
					Inicio
				</Link>
				<a class='items-center flex md:hidden' href="/busqueda">
					<svg width="18" height="18" viewBox="0 0 18 18" fill="none" xmlns="http://www.w3.org/2000/svg">
						<path d="M13.1556 11.6124C12.9692 11.4257 12.7162 11.3208 12.4524 11.3208H12.1713C12.0944 11.3208 12.0205 11.2909 11.9652 11.2376C11.8519 11.1283 11.8441 10.95 11.9416 10.8265C12.843 9.68511 13.3791 8.24638 13.3791 6.68954C13.3791 2.99485 10.3842 0 6.68954 0C2.99485 0 0 2.99485 0 6.68954C0 10.3842 2.99485 13.3791 6.68954 13.3791C8.24638 13.3791 9.68511 12.843 10.8265 11.9416C10.95 11.8441 11.1283 11.8519 11.2376 11.9652C11.2909 12.0205 11.3208 12.0944 11.3208 12.1713V12.4524C11.3208 12.7162 11.4257 12.9692 11.6124 13.1556L15.6991 17.234C16.1231 17.6572 16.8097 17.6569 17.2333 17.2333C17.6569 16.8097 17.6572 16.1231 17.234 15.6991L13.1556 11.6124ZM6.68954 11.3208C4.12693 11.3208 2.05832 9.25214 2.05832 6.68954C2.05832 4.12693 4.12693 2.05832 6.68954 2.05832C9.25214 2.05832 11.3208 4.12693 11.3208 6.68954C11.3208 9.25214 9.25214 11.3208 6.68954 11.3208Z" fill="#3C5368"/>
					</svg>
				</a>
			</div>
			<Dropdown {...dropdownClasses}>
				<button class="flex items-center">
					<span {...textDirectoryClasses}>Directorios</span>
					<svg
					xmlns="http://www.w3.org/2000/svg"
					fill="none"
					viewBox="0 0 24 24"
					stroke-width="3"
					stroke="currentColor"
					class="min-w-3 h-3 ml-2 group-open:rotate-180 text-neutral-500">
						<path
						stroke-linecap="round"
						stroke-linejoin="round"
						d="M19.5 8.25l-7.5 7.5-7.5-7.5">
						</path>
					</svg>
				</button>
				<DropdownItems class="relative">
					<div {...dropdownChildClasses}>
						<Link url="/medicos" alt="Página de Médicos" header {...dropdownLinkClasses}>
							Médicos
						</Link>
						<Link url="/centros-de-especialidad" alt="Página de Centros de Especialidad" header {...dropdownLinkClasses}>
							Centros de Especialidad
						</Link>
						<Link url="/servicios" alt="Página de Nuestros servicios" header {...dropdownLinkClasses}>
							Nuestros servicios
						</Link>
					</div>
				</DropdownItems>
			</Dropdown>
			<Dropdown {...dropdownClasses}>
				<button class="flex items-center">
					<div {...textOrientationClasses}>
						Orientación <br/>a Pacientes
					</div>
					<svg
					xmlns="http://www.w3.org/2000/svg"
					fill="none"
					viewBox="0 0 24 24"
					stroke-width="3"
					stroke="currentColor"
					class="min-w-3 h-3 ml-2 group-open:rotate-180 text-neutral-500">
						<path
						stroke-linecap="round"
						stroke-linejoin="round"
						d="M19.5 8.25l-7.5 7.5-7.5-7.5"></path>
					</svg>
				</button>
				<DropdownItems class="relative">
					<div {...dropdownChildClasses}>
						<Link url="/pacientes" header {...dropdownLinkClasses}>
							Pacientes
						</Link>
						<Link url="/visitantes" header {...dropdownLinkClasses}>
							Visitantes
						</Link>
					</div>
				</DropdownItems>
			</Dropdown>
			<Link {...nonDropdownClasses} header url="#">
				Directorio
			</Link>
			<Link url="/medicos" header color="blue" {...nonDropdownLinkClasses}>
				Médicos
			</Link>
			<Link url="/centros-de-especialidad" header color="blue" {...nonDropdownLinkClasses}>
				Centros de Especialidad
			</Link>
			<Link url="/servicios" header color="blue" {...nonDropdownLinkClasses}>
				Nuestros servicios
			</Link>
			<Link {...nonDropdownClasses} header url="#">
				Orientacion a Pacientes
			</Link>
			<Link url="/pacientes" header color="blue" {...nonDropdownLinkClasses}>
				Pacientes
			</Link>
			<Link url="/visitantes" header color="blue" {...nonDropdownLinkClasses}>
				Visitantes
			</Link>
			<Link url="/referencias" header class='whitespace-nowrap lg:content-center pt-8 lg:p-0'>
				Refiere a<br/>un paciente
			</Link>
			<!-- <Link url="/blog" header {...linkClasses}>
				Blog
			</Link> -->
			<Link url="/nosotros" header {...linkClasses}>
				Nosotros
			</Link>
			<a class='items-center hidden md:flex' href="/busqueda">
				<svg width="18" height="18" viewBox="0 0 18 18" fill="none" xmlns="http://www.w3.org/2000/svg">
					<path d="M13.1556 11.6124C12.9692 11.4257 12.7162 11.3208 12.4524 11.3208H12.1713C12.0944 11.3208 12.0205 11.2909 11.9652 11.2376C11.8519 11.1283 11.8441 10.95 11.9416 10.8265C12.843 9.68511 13.3791 8.24638 13.3791 6.68954C13.3791 2.99485 10.3842 0 6.68954 0C2.99485 0 0 2.99485 0 6.68954C0 10.3842 2.99485 13.3791 6.68954 13.3791C8.24638 13.3791 9.68511 12.843 10.8265 11.9416C10.95 11.8441 11.1283 11.8519 11.2376 11.9652C11.2909 12.0205 11.3208 12.0944 11.3208 12.1713V12.4524C11.3208 12.7162 11.4257 12.9692 11.6124 13.1556L15.6991 17.234C16.1231 17.6572 16.8097 17.6569 17.2333 17.2333C17.6569 16.8097 17.6572 16.1231 17.234 15.6991L13.1556 11.6124ZM6.68954 11.3208C4.12693 11.3208 2.05832 9.25214 2.05832 6.68954C2.05832 4.12693 4.12693 2.05832 6.68954 2.05832C9.25214 2.05832 11.3208 4.12693 11.3208 6.68954C11.3208 9.25214 9.25214 11.3208 6.68954 11.3208Z" fill="#3C5368"/>
				</svg>
			</a>
		</div>
	</MenuItems>
</Astronav>
